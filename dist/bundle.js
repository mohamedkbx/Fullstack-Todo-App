(()=>{const t=document.querySelector(".todo__button"),e=document.querySelector(".todo__input"),n=document.querySelector(".todo-list"),s=document.querySelector(".filter-todo"),o=document.getElementById("notification");document.addEventListener("DOMContentLoaded",(function(){let t;t=null===localStorage.getItem("todos")?[]:JSON.parse(localStorage.getItem("todos")),t.forEach((t=>{const e=document.createElement("div");e.classList.add("todo");const s=document.createElement("li");s.innerText=t,s.classList.add("todo__item"),e.appendChild(s),document.createElement("div").classList.add("todo__controls");const o=document.createElement("button");o.innerHTML="<i class ='fas fa-check'></i>",o.classList.add("complete__button"),e.appendChild(o);const a=document.createElement("button");a.innerHTML="<i class ='fas fa-trash'></i>",a.classList.add("trash__button"),e.appendChild(a);const c=document.createElement("button");c.innerHTML="<i class ='fas fa-edit'></i>",c.classList.add("edit__button"),e.appendChild(c),n.appendChild(e)}))})),t.addEventListener("click",(function(t){t.preventDefault();const s=document.createElement("div");s.classList.add("todo");const a=document.createElement("li");if(!e.value)return;a.innerText=e.value,a.classList.add("todo__item"),s.appendChild(a),function(t){let e;e=null===localStorage.getItem("todos")?[]:JSON.parse(localStorage.getItem("todos")),e.push(t),localStorage.setItem("todos",JSON.stringify(e))}(e.value);const c=document.createElement("button");c.innerHTML="<i class ='fas fa-check'></i>",c.classList.add("complete__button"),s.appendChild(c);const l=document.createElement("button");l.innerHTML="<i class ='fas fa-trash'></i>",l.classList.add("trash__button"),s.appendChild(l);const d=document.createElement("button");d.innerHTML="<i class ='fas fa-edit'></i>",d.classList.add("edit__button"),s.appendChild(d),n.appendChild(s),e.value="",e.focus(),o.classList.add("show"),setTimeout((()=>{o.classList.remove("show")}),3e3)})),n.addEventListener("click",(function(t){const e=t.target,n=e.parentElement;if(e.classList.contains("trash__button")&&(n.classList.add("fall"),function(t){let e;e=null===localStorage.getItem("todos")?[]:JSON.parse(localStorage.getItem("todos"));const n=t.children[0].innerText;e.splice(e.indexOf(n),1),localStorage.setItem("todos",JSON.stringify(e))}(n),n.addEventListener("transitionend",(function(){n.remove()}))),e.classList.contains("complete__button")&&n.classList.toggle("completed"),e.classList.contains("edit__button")){const t=n.querySelector(".todo__item"),s=document.createElement("input");s.type="text",s.value=t.innerText,s.classList.add("edit-input"),n.replaceChild(s,t),s.focus(),e.innerHTML="<i class='fas fa-save'></i>",e.classList.remove("edit__button"),e.classList.add("save__button"),e.addEventListener("click",(function(){!function(t,e){const n=document.createElement("li");n.innerText=e,n.classList.add("todo__item");const s=t.querySelector(".edit-input");t.replaceChild(n,s),function(t,e){let n=JSON.parse(localStorage.getItem("todos"))||[];const s=t.querySelector(".todo__item").innerText,o=n.findIndex((t=>t===s));o>-1&&(n[o]=e),localStorage.setItem("todos",JSON.stringify(n))}(t,e)}(n,s.value)}))}})),s.addEventListener("click",(function(t){n.childNodes.forEach((e=>{switch(t.target.value){case"all":e.style.display="flex";break;case"completed":e.classList.contains("completed")?e.style.display="flex":e.style.display="none";break;case"uncompleted":e.classList.contains("completed")?e.style.display="none":e.style.display="flex"}}))}))})();